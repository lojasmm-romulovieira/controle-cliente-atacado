import{W as C,r as p,j as e,Y as N}from"./app-D5bbi-HV.js";import{A as w}from"./AuthenticatedLayout-DxbLEL7P.js";import{P as f,B as A,F as B,C as E}from"./ClienteFilter-BrK4eNdX.js";import"./ApplicationLogo-DQrrogKU.js";import"./transition-Dmifb0zn.js";function v(r){var d;const{columns:l,pagination:t,rows:g,filters:o}=r,{data:n,setData:x,get:a}=C({search:""});p.useEffect(()=>{if(o){const{search:s}=o;n.search=s??"",x("search",s)}},[o]);const m=s=>{s.preventDefault(),a(route("web.cliente.index"),n)};return e.jsxs("div",{className:"relative overflow-x-auto sm:rounded-lg",children:[e.jsx("div",{className:"pb-4",children:e.jsx("form",{className:"max-w-lg ml-auto",onSubmit:m,children:e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"search",id:"search-dropdown",className:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded border border-gray-300 focus:ring-blue-500 focus:border-blue-500",placeholder:"Contato, Razão Social, Cnpj, Cidade, Estado",onChange:s=>x("search",s.target.value),value:n.search}),e.jsxs("button",{type:"submit",className:"absolute top-0 end-0 p-2.5 text-sm font-medium h-full text-white bg-blue-700 rounded-e-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300",children:[e.jsx("svg",{className:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),e.jsx("span",{className:"sr-only",children:"Search"})]})]})})})}),e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsx("tr",{children:l.map((s,c)=>e.jsx("th",{scope:"col",className:"px-6 py-3",children:s.label},c))})}),e.jsx("tbody",{children:g.map((s,c)=>e.jsx("tr",{className:"border-b",children:l.map((i,b)=>{const h=i.isColored?s.colorColumn:"bg-white";return e.jsx("td",{className:"px-6 py-2 "+h,children:s[i==null?void 0:i.accessor]},b)})},c))})]}),e.jsxs("nav",{className:"flex items-center flex-column flex-wrap md:flex-row justify-between pt-4","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["Exibindo",e.jsxs("span",{className:"font-semibold text-gray-900",children:[" ",t.from," a ",t.to]})," de ",e.jsxs("span",{className:"font-semibold text-gray-900",children:[t.total," Entradas"]})]}),e.jsx("ul",{className:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8",children:(d=t==null?void 0:t.links)==null?void 0:d.map((s,c)=>{const i=c===0,b=c===t.links.length-1,j=s.active,h=s.url===null;let u="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700";return i?(u="flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700",s.label="Anterior"):b?(u="flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700",s.label="Próximo"):j?u="flex items-center justify-center px-3 h-8 text-blue-600 border border-gray-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700":h&&(u+=" opacity-50 cursor-not-allowed"),e.jsx("li",{children:e.jsx("a",{href:s.url||"#",className:u,children:s.label})},c)})})]})]})}v.propTypes={columns:f.array.isRequired,pagination:f.object.isRequired,rows:f.array.isRequired};const S=1,R=2,I=3,D=4,T=r=>{switch(r){case S:return"bg-green-600 text-white";case R:return"bg-yellow-500 text-white";case I:return"bg-red-600 text-white";case D:return"bg-blue-600 text-white";default:return"bg-gray-600 text-white"}},P=r=>r.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),L=P,O=r=>{const l=new Date(r),t=l.toLocaleDateString("pt-BR")+" "+l.toLocaleTimeString("pt-BR");return t==="Invalid Date Invalid Date"?"":t},y=O,F=r=>{const l={1:"A",2:"B",3:"C",4:"Em Prospecção"}[parseInt(r)],t={1:"bg-green-600",2:"bg-yellow-500",3:"bg-red-600",4:"bg-blue-600"}[parseInt(r)];if(!l||!t)throw new Error("classificacao não mapeado. Verificar função getBadgeClassificacaoCliente.");return e.jsx("span",{className:`text-white font-medium me-2 px-2.5 py-0.5 rounded ${t}`,children:l})},z=r=>{const l={0:"Inativo",1:"Ativo"}[parseInt(r)],t={0:"bg-red-600",1:"bg-green-600"}[parseInt(r)];if(!l||!t)throw new Error("idsituacao não mapeado. Verificar função getBadgeSituacaoCliente.");return e.jsx("span",{className:`text-white  me-2 px-2.5 py-0.5 rounded ${t}`,children:l})};function U(r){const{auth:l,filters:t,filtersOptions:g}=r,{clientes:o}=r,n=p.useMemo(()=>[{label:"CNPJ",accessor:"cnpj",isColored:!0},{label:"RAZAO SOCIAL",accessor:"razaosocial"},{label:"CIDADE",accessor:"cidade"},{label:"CONTATO",accessor:"contato"},{label:"FONE",accessor:"fone"},{label:"STATUS",accessor:"status"},{label:"LIMITE",accessor:"limite"},{label:"Ult.Venda",accessor:"venda"},{label:"Ult.Lig",accessor:"ultlig"},{label:"Situação",accessor:"situacao"}],[]),x=p.useMemo(()=>o.data.map(a=>{var m,d;return{...a,cnpj:a.cnpj,razaosocial:a.razaosocial,cidade:a.cidade.nome+" - "+a.cidade.estado.uf,contato:a.nome,fone:a.fone1,status:F(a.classificacao.idclassificacao),limite:L(a.limitecredito),venda:y((m=a==null?void 0:a.ult_venda)==null?void 0:m.created_at),ultlig:y((d=a==null?void 0:a.ult_lig)==null?void 0:d.created_at),colorColumn:T(a.classificacao.idclassificacao),situacao:z(a.ativo)}}),[o.data]);return e.jsxs(w,{user:l.user,header:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-blue-700 leading-tight",children:"Cliente"}),e.jsx(A,{className:"bg-blue-700 ml-auto",children:e.jsx(B,{className:"flex-shrink-0",size:20})})]}),children:[e.jsx(N,{title:"Cliente"}),e.jsx(E,{filtersOptions:g,filters:t}),e.jsx(v,{columns:n,pagination:o,rows:x,filters:t})]})}export{U as default};
